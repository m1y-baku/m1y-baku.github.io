<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M1Y | Money Power</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, doc, deleteDoc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDkY51jHCvchXjlk0N005SaRcneCv_fWX0",
            authDomain: "timexbaku-a2c66.firebaseapp.com",
            projectId: "timexbaku-a2c66",
            storageBucket: "timexbaku-a2c66.firebasestorage.app",
            messagingSenderId: "837389958136",
            appId: "1:837389958136:web:6de36b6d6049783051f40d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ðŸ†” Ä°STÄ°FADÆÃ‡Ä° ID SÄ°STEMÄ°
        if (!localStorage.getItem('m1y_user_id')) {
            localStorage.setItem('m1y_user_id', 'M1Y-' + Math.random().toString(36).substr(2, 6).toUpperCase());
        }
        const myID = localStorage.getItem('m1y_user_id');

        // ðŸŒŸ VÄ°P YOXLAMASI
        onSnapshot(doc(db, "m1y_vips", myID), (d) => {
            if (d.exists()) {
                localStorage.setItem('m1y_premium', 'true');
            }
        });

        const jobGrid = document.getElementById('jobGrid');
        const q = query(collection(db, "m1y_jobs"), orderBy("createdAt", "desc"));

        onSnapshot(q, (snapshot) => {
            jobGrid.innerHTML = "";
            snapshot.forEach((d) => {
                const job = d.data();
                jobGrid.innerHTML += `
                    <div class="bg-zinc-900/50 backdrop-blur-xl rounded-[2rem] p-6 border border-white/5 hover:border-cyan-500/50 transition-all duration-500 shadow-2xl group relative overflow-hidden">
                        <div class="absolute -top-10 -right-10 w-32 h-32 bg-cyan-500/10 blur-3xl rounded-full"></div>
                        <div class="flex justify-between items-start mb-4 relative z-10">
                            <span class="px-3 py-1 bg-cyan-500/10 text-cyan-400 text-[10px] font-bold uppercase rounded-lg border border-cyan-500/20">${job.category}</span>
                            <span class="text-green-400 font-black text-xl tracking-tighter">${job.price} AZN</span>
                        </div>
                        <h3 class="text-white font-bold text-xl mb-2 group-hover:text-cyan-400 transition">${job.title}</h3>
                        <p class="text-zinc-400 text-sm mb-6 line-clamp-2 font-light">${job.description}</p>
                        <div class="flex items-center justify-between border-t border-white/5 pt-5 relative z-10">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-gradient-to-tr from-cyan-600 to-purple-600 rounded-full flex items-center justify-center text-white font-bold">${job.userName.charAt(0)}</div>
                                <div><p class="text-xs font-bold text-zinc-200">${job.userName}</p></div>
                            </div>
                            <a href="https://wa.me/${job.phone}" target="_blank" class="p-3 bg-white text-black rounded-xl hover:bg-cyan-500 hover:text-white transition shadow-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326z"/></svg>
                            </a>
                        </div>
                    </div>`;
            });
        });

        window.submitM1Y = async function() {
            const lastDate = localStorage.getItem('lastPost');
            const today = new Date().toLocaleDateString();
            const isPremium = localStorage.getItem('m1y_premium') === 'true';
            if (!isPremium && lastDate === today) { document.getElementById('limitError').classList.remove('hidden'); return; }
            const data = { userName: document.getElementById('mName').value, title: document.getElementById('mTitle').value, price: document.getElementById('mPrice').value, category: document.getElementById('mCat').value, phone: document.getElementById('mPhone').value, description: document.getElementById('mDesc').value, createdAt: new Date() };
            try { await addDoc(collection(db, "m1y_jobs"), data); localStorage.setItem('lastPost', today); location.reload(); } catch (e) { alert(e.message); }
        }

        // ðŸ”’ GÄ°ZLÄ° ADMÄ°N PANELÄ° GÄ°RÄ°ÅžÄ° (3-tÄ±k sistemi)
        let clickCount = 0;
        window.secretAdminTrigger = function() {
            clickCount++;
            if(clickCount === 3) { 
                openAdmin(); 
                clickCount = 0; 
            }
            setTimeout(() => { clickCount = 0; }, 2000); // 2 saniyÉ™dÉ™ vurmasan sÄ±fÄ±rlanÄ±r
        }

        window.openAdmin = async function() {
            const pass = prompt("Admin ÅžifrÉ™si:");
            if(pass === "QaQa0202QaQa0202") {
                document.getElementById('adminPanel').style.display = 'flex';
                onSnapshot(q, (snapshot) => {
                    const list = document.getElementById('adminList');
                    list.innerHTML = "";
                    snapshot.forEach(d => {
                        list.innerHTML += `<div class="flex justify-between items-center bg-black/50 p-4 rounded-xl border border-white/5 mb-2"><span class="text-[10px] text-white">${d.data().title}</span><button onclick="deleteJob('${d.id}')" class="text-red-500 font-bold text-[10px]">SÄ°L</button></div>`;
                    });
                });
            } else {
                alert("ÅžifrÉ™ sÉ™hvdir!");
            }
        }

        window.makeVIP = async function() {
            const vipID = document.getElementById('vipIDInput').value.trim();
            if(!vipID) return;
            try { await setDoc(doc(db, "m1y_vips", vipID), { active: true, date: new Date() }); alert(vipID + " ArtÄ±q VÄ°P-dir!"); } catch (e) { alert(e.message); }
        }

        window.deleteJob = async function(id) { if(confirm("Silsin?")) await deleteDoc(doc(db, "m1y_jobs", id)); }
        
        document.getElementById('displayMyID').innerText = myID;
    </script>

    <style>
        body { background-color: #050505; color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; }
        .cyber-bg { background: linear-gradient(135deg, #050505 0%, #0a0a15 100%); position: fixed; inset: 0; z-index: -1; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; backdrop-filter: blur(15px); align-items: center; justify-content: center; }
    </style>
</head>
<body>
    <div class="cyber-bg"></div>

    <nav class="border-b border-white/5 py-8 bg-black/50 backdrop-blur-xl sticky top-0 z-50">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-gradient-to-br from-cyan-500 to-purple-600 rounded-2xl flex items-center justify-center text-white font-black text-2xl shadow-lg">M</div>
                <h1 class="text-2xl font-black tracking-tighter italic">1Y</h1>
            </div>
            <button onclick="document.getElementById('jobModal').style.display='flex'" class="bg-white text-black px-6 py-3 rounded-2xl font-extrabold text-[10px] uppercase tracking-widest hover:bg-cyan-500 hover:text-white transition duration-500">Elan PaylaÅŸ</button>
        </div>
    </nav>

    <section class="container mx-auto px-6 py-24 text-center">
        <h2 class="text-6xl md:text-8xl font-black mb-8 tracking-tighter">MONEY IS <span class="bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">YOURS</span></h2>
        <div class="max-w-2xl mx-auto mb-20">
            <input type="text" onkeyup="search()" id="searchInp" placeholder="Freelancer axtar..." class="w-full p-7 bg-zinc-900 rounded-[2rem] border border-white/5 outline-none focus:border-cyan-500 text-white shadow-2xl">
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-left" id="jobGrid"></div>
    </section>

    <div id="jobModal" class="modal p-4">
        <div class="bg-zinc-900 border border-white/10 rounded-[3rem] p-10 w-full max-w-lg shadow-2xl relative">
            <h2 class="text-2xl font-black mb-8 text-cyan-400 uppercase italic">Yeni TÉ™klif</h2>
            <div id="limitError" class="hidden mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-2xl text-[10px]">
                <p class="text-red-400 font-bold uppercase">Limit Dolub!</p>
                <p class="text-zinc-400 mb-2">GÃ¼ndÉ™lik 1 pulsuz elan bitib. Limitsiz Ã¼Ã§Ã¼n 1 AZN Ã¶dÉ™yin.</p>
                <a href="https://wa.me/9943220807?text=MÉ™nÉ™ limitsiz paket lazÄ±mdÄ±r" class="text-white underline font-bold">WhatsApp Ã–dÉ™niÅŸ</a>
            </div>
            <div class="space-y-4">
                <input type="text" id="mName" placeholder="Ad Soyad" class="w-full p-4 bg-black/40 rounded-2xl border border-white/5 outline-none text-sm">
                <input type="text" id="mTitle" placeholder="Ä°ÅŸin adÄ±" class="w-full p-4 bg-black/40 rounded-2xl border border-white/5 outline-none text-sm">
                <div class="grid grid-cols-2 gap-4">
                    <input type="number" id="mPrice" placeholder="QiymÉ™t" class="p-4 bg-black/40 rounded-2xl border border-white/5 outline-none text-sm">
                    <select id="mCat" class="p-4 bg-black/40 rounded-2xl border border-white/5 text-sm text-zinc-400"><option>Dizayn</option><option>ProqramlaÅŸdÄ±rma</option><option>SMM</option><option>Video</option></select>
                </div>
                <input type="text" id="mPhone" placeholder="WhatsApp (994...)" class="w-full p-4 bg-black/40 rounded-2xl border border-white/5 outline-none text-sm">
                <textarea id="mDesc" placeholder="HaqqÄ±nda..." class="w-full p-4 bg-black/40 rounded-2xl border border-white/5 outline-none h-24 resize-none text-sm"></textarea>
                <button onclick="submitM1Y()" class="w-full py-5 bg-gradient-to-r from-cyan-600 to-purple-600 text-white font-black rounded-2xl uppercase text-[10px]">SistemÉ™ YerlÉ™ÅŸdir</button>
                <button onclick="document.getElementById('jobModal').style.display='none'" class="w-full text-zinc-600 text-[10px] mt-2 uppercase">BaÄŸla</button>
                <p class="text-[9px] text-zinc-600 mt-4 text-center">Sizin ID: <span id="displayMyID" class="text-zinc-400 font-bold">...</span></p>
            </div>
        </div>
    </div>

    <div id="adminPanel" class="modal">
        <div class="bg-zinc-900 p-8 rounded-[2rem] w-full max-w-md border border-white/10 shadow-2xl">
            <div class="flex justify-between mb-6">
                <h2 class="text-cyan-400 font-black uppercase italic text-sm">Admin Panel</h2>
                <button onclick="document.getElementById('adminPanel').style.display='none'" class="text-zinc-500">âœ•</button>
            </div>
            <div class="mb-8 p-4 bg-cyan-500/5 rounded-2xl border border-cyan-500/10 text-center">
                <h3 class="text-cyan-400 text-[10px] font-black uppercase mb-3">VÄ°P Aktivator</h3>
                <div class="flex gap-2">
                    <input type="text" id="vipIDInput" placeholder="MÃ¼ÅŸtÉ™ri ID-sini yaz" class="flex-1 p-3 bg-black/40 rounded-xl border border-white/5 text-[10px] text-white outline-none">
                    <button onclick="makeVIP()" class="bg-cyan-500 text-black px-4 py-2 rounded-xl text-[10px] font-bold">OK</button>
                </div>
            </div>
            <div id="adminList" class="max-h-[300px] overflow-y-auto pr-2"></div>
        </div>
    </div>

    <footer class="py-20 text-center">
        <div onclick="secretAdminTrigger()" class="cursor-default select-none text-zinc-800 text-[10px] font-medium tracking-widest hover:text-zinc-600 transition duration-700">
            Â© 2026 M1Y PLATFORM
        </div>
    </footer>

    <script>
        function search() {
            let val = document.getElementById('searchInp').value.toLowerCase();
            document.querySelectorAll('#jobGrid > div').forEach(card => {
                card.style.display = card.innerText.toLowerCase().includes(val) ? "block" : "none";
            });
        }
    </script>
</body>
</html>